import{_ as a,c as s,o as n,a as e}from"./app.f6eafdd6.js";const h=JSON.parse('{"title":"vue\u6253\u5305\u4F18\u5316","description":"","frontmatter":{"title":"vue\u6253\u5305\u4F18\u5316","date":"2020-07-03T00:00:00.000Z"},"headers":[{"level":3,"title":"productionSourceMap: false","slug":"productionsourcemap-false"},{"level":3,"title":"chainWebpack","slug":"chainwebpack"},{"level":3,"title":"configureWepack","slug":"configurewepack"}],"relativePath":"md/vue \u6253\u5305\u4F18\u5316.md","lastUpdated":1661483318000}'),p={name:"md/vue \u6253\u5305\u4F18\u5316.md"},l=e(`<h1 id="vue-\u6253\u5305\u4F18\u5316" tabindex="-1">vue \u6253\u5305\u4F18\u5316 <a class="header-anchor" href="#vue-\u6253\u5305\u4F18\u5316" aria-hidden="true">#</a></h1><h3 id="productionsourcemap-false" tabindex="-1">productionSourceMap: false <a class="header-anchor" href="#productionsourcemap-false" aria-hidden="true">#</a></h3><p>\u5982\u679C\u4F60\u4E0D\u9700\u8981\u751F\u4EA7\u73AF\u5883\u7684 source map\uFF0C\u53EF\u4EE5\u5C06\u5176\u8BBE\u7F6E\u4E3A false \u4EE5\u52A0\u901F\u751F\u4EA7\u73AF\u5883\u6784\u5EFA\u3002</p><h3 id="chainwebpack" tabindex="-1">chainWebpack <a class="header-anchor" href="#chainwebpack" aria-hidden="true">#</a></h3><h4 id="webpack-bundle-analyzer" tabindex="-1">webpack-bundle-analyzer <a class="header-anchor" href="#webpack-bundle-analyzer" aria-hidden="true">#</a></h4><p>\u6253\u5305\u7ED3\u679C\u5206\u6790\uFF0C\u4E0D\u80FD\u4E0E CompressionWebpackPlugin \u4E00\u8D77\u4F7F\u7528</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> if (p<wbr>rocess.env.NODE_ENV === &#39;production&#39;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">   config.plugin(&#39;webpack-bundle-analyzer&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">     .use(require(&#39;webpack-bundle-analyzer&#39;).BundleAnalyzerPlugin)</span></span>
<span class="line"><span style="color:#A6ACCD;">     .end()</span></span>
<span class="line"><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="prefetch" tabindex="-1">prefetch <a class="header-anchor" href="#prefetch" aria-hidden="true">#</a></h4><p>prefetch \u662F\u4E00\u79CD resource hint\uFF0C\u7528\u6765\u544A\u8BC9\u6D4F\u89C8\u5668\u5728\u9875\u9762\u52A0\u8F7D\u5B8C\u6210\u540E\uFF0C\u5229\u7528\u7A7A\u95F2\u65F6\u95F4\u63D0\u524D\u83B7\u53D6\u7528\u6237\u672A\u6765\u53EF\u80FD\u4F1A\u8BBF\u95EE\u7684\u5185\u5BB9\u3002</p><p>\u7981\u7528\uFF1Aconfig.plugins.delete(&#39;prefetch&#39;)</p><p>\u5F53 prefetch \u63D2\u4EF6\u88AB\u7981\u7528\u65F6\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 webpack \u7684\u5185\u8054\u6CE8\u91CA\u624B\u52A8\u9009\u5B9A\u8981\u63D0\u524D\u83B7\u53D6\u7684\u4EE3\u7801\u533A\u5757\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> import(/* webpackPrefetch: true */ &#39;./someAsyncComponent.vue&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Prefetch \u94FE\u63A5\u5C06\u4F1A\u6D88\u8017\u5E26\u5BBD\u3002</p><h3 id="configurewepack" tabindex="-1">configureWepack <a class="header-anchor" href="#configurewepack" aria-hidden="true">#</a></h3><h4 id="ignoreplugin" tabindex="-1">ignorePlugin <a class="header-anchor" href="#ignoreplugin" aria-hidden="true">#</a></h4><p>\u963B\u6B62\u4F9D\u8D56\u7684\u67D0\u4E9B\u6A21\u5757\u6253\u5305\u5230 bundle \u4E2D</p><p>moment \u4F18\u5316 locale</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> plugins: [new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/)]</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="externals" tabindex="-1">externals <a class="header-anchor" href="#externals" aria-hidden="true">#</a></h4><p>\u9632\u6B62\u5C06\u67D0\u4E9B import \u7684\u5305\uFF08package\uFF09\u6253\u5305\u5230 bundle \u4E2D</p><p>\u9632\u6B62 Vconsole \u6253\u5305\u5230\u751F\u4EA7\u73AF\u5883</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> externals: p<wbr>rocess.env.NODE_ENV === &#39;production&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">   ? {</span></span>
<span class="line"><span style="color:#A6ACCD;">       vconsole: &#39;Vconsole&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">     }</span></span>
<span class="line"><span style="color:#A6ACCD;">   : {}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="compressionwebpackplugin" tabindex="-1">CompressionWebpackPlugin <a class="header-anchor" href="#compressionwebpackplugin" aria-hidden="true">#</a></h4><p>\u51C6\u5907\u8D44\u4EA7\u7684\u538B\u7F29\u7248\u672C\uFF0C\u4EE5\u4F7F\u7528 Content-Encoding \u670D\u52A1\u3002\u9700\u8981\u76F8\u5E94\u7684 nginx \u914D\u7F6E</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">plugins: [</span></span>
<span class="line"><span style="color:#A6ACCD;">   new CompressionWebpackPlugin({</span></span>
<span class="line"><span style="color:#A6ACCD;">     test: /\\.(js|json|css|jp?eg|png)$/,</span></span>
<span class="line"><span style="color:#A6ACCD;">     threshold: 0,   // \u5F53\u8D44\u6E90\u5927\u4E8E\u8BE5\u503C\u65F6\u8FDB\u884C\u538B\u7F29</span></span>
<span class="line"><span style="color:#A6ACCD;">     minRatio: 1,    // \u538B\u7F29\u7387\u5C0F\u4E8E\u8FD9\u4E2A\u503C\u7684\u8D44\u6E90\u4F1A\u88AB\u538B\u7F29\uFF0C\u9ED8\u8BA4\u4E3A 0.8</span></span>
<span class="line"><span style="color:#A6ACCD;">     deleteOriginalAssets: true // \u5220\u9664\u6E90\u6587\u4EF6, \u914D\u5408webpack-bundle-analyzer\u65F6\u4E0D\u80FD\u5220\u9664\u6E90\u6587\u4EF6\uFF0C\u4E14\u9700\u8981\u914D\u7F6E\u9759\u6001\u670D\u52A1\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">   })</span></span>
<span class="line"><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"><span style="color:#A6ACCD;">     #gzip  on;</span></span>
<span class="line"><span style="color:#A6ACCD;">     gzip_static on;</span></span>
<span class="line"><span style="color:#A6ACCD;"> \u200B</span></span>
<span class="line"><span style="color:#A6ACCD;">     # \u542F\u7528gzip\u538B\u7F29\u7684\u6700\u5C0F\u6587\u4EF6\uFF1B\u5C0F\u4E8E\u8BBE\u7F6E\u503C\u7684\u6587\u4EF6\u5C06\u4E0D\u4F1A\u88AB\u538B\u7F29</span></span>
<span class="line"><span style="color:#A6ACCD;">     gzip_min_length 1k;</span></span>
<span class="line"><span style="color:#A6ACCD;"> \u200B</span></span>
<span class="line"><span style="color:#A6ACCD;">     # gzip \u538B\u7F29\u7EA7\u522B 1-10</span></span>
<span class="line"><span style="color:#A6ACCD;">     gzip_comp_level 2;</span></span>
<span class="line"><span style="color:#A6ACCD;"> \u200B</span></span>
<span class="line"><span style="color:#A6ACCD;">     # \u8FDB\u884C\u538B\u7F29\u7684\u6587\u4EF6\u7C7B\u578B\uFF0C\u9759\u6001\u538B\u7F29\u8BBE\u7F6E gzip_types \u6CA1\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">     # gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span></span>
<span class="line"><span style="color:#A6ACCD;"> \u200B</span></span>
<span class="line"><span style="color:#A6ACCD;">     # \u662F\u5426\u5728http header\u4E2D\u6DFB\u52A0Vary: Accept-Encoding\uFF0C\u5EFA\u8BAE\u5F00\u542F</span></span>
<span class="line"><span style="color:#A6ACCD;">     gzip_vary on;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,25),c=[l];function o(i,r,t,d,u,A){return n(),s("div",null,c)}const g=a(p,[["render",o]]);export{h as __pageData,g as default};
